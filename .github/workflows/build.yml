    - name: Add Firebase to Android
      run: |
        # Fix applicationId to match google-services.json package name
        sed -i 's/applicationId "com.alphawp.orders.alerts"/applicationId "com.alphawp.orders.alerts"/' android/app/build.gradle
        sed -i 's/namespace "com.alphawp.orders.alerts"/namespace "com.alphawp.orders.alerts"/' android/app/build.gradle
        
        # If applicationId is different, fix it
        sed -i 's/applicationId "[^"]*"/applicationId "com.alphawp.orders.alerts"/' android/app/build.gradle
        sed -i 's/namespace "[^"]*"/namespace "com.alphawp.orders.alerts"/' android/app/build.gradle
        
        # Add google-services plugin to settings.gradle plugins block
        sed -i '/^plugins {/a\    id "com.google.gms.google-services" version "4.4.0" apply false' android/settings.gradle
        
        # Add google-services plugin to app/build.gradle plugins block
        sed -i '/id "dev.flutter.flutter-gradle-plugin"/a\    id "com.google.gms.google-services"' android/app/build.gradle
        
        # Add Firebase BOM and messaging dependencies
        echo "" >> android/app/build.gradle
        echo "dependencies {" >> android/app/build.gradle
        echo "    implementation platform('com.google.firebase:firebase-bom:32.7.0')" >> android/app/build.gradle
        echo "    implementation 'com.google.firebase:firebase-messaging'" >> android/app/build.gradle
        echo "}" >> android/app/build.gradle
        
        # Debug: Show what the build.gradle looks like
        echo "=== build.gradle contents ==="
        cat android/app/build.gradle
